-- -------------------------------------------------------------
-- 
-- File Name: C:\QPSK\hdl_prj_zcu111\hdlsrc\hdlcoder_QPSKTxRx_RFSoC\QPSK_src_Stream_Out_Switch.vhd
-- Created: 2025-09-17 13:27:53
-- 
-- Generated by MATLAB 25.1, HDL Coder 25.1, and Simulink 25.1
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: QPSK_src_Stream_Out_Switch
-- Source Path: hdlcoder_QPSKTxRx_RFSoC/QPSK/To DMA/Stream Out Switch
-- Hierarchy Level: 2
-- Model version: 9.4
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;

ENTITY QPSK_src_Stream_Out_Switch IS
  PORT( stream0_data                      :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
        stream0_valid                     :   IN    std_logic;
        stream0_last                      :   IN    std_logic;
        stream1_data                      :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
        stream1_valid                     :   IN    std_logic;
        stream1_last                      :   IN    std_logic;
        streamOutReady                    :   IN    std_logic;
        streamOutData                     :   OUT   std_logic_vector(31 DOWNTO 0);  -- uint32
        streamOutValid                    :   OUT   std_logic;
        streamOutLast                     :   OUT   std_logic;
        stream0Ready                      :   OUT   std_logic;
        stream1Ready                      :   OUT   std_logic;
        last                              :   OUT   std_logic
        );
END QPSK_src_Stream_Out_Switch;


ARCHITECTURE rtl OF QPSK_src_Stream_Out_Switch IS

  -- Component Declarations
  COMPONENT QPSK_src_From_Stream_Bus
    PORT( bus_data                        :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
          bus_valid                       :   IN    std_logic;
          bus_last                        :   IN    std_logic;
          data                            :   OUT   std_logic_vector(31 DOWNTO 0);  -- uint32
          valid                           :   OUT   std_logic;
          last                            :   OUT   std_logic
          );
  END COMPONENT;

  COMPONENT QPSK_src_From_Stream_Bus1
    PORT( bus_data                        :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
          bus_valid                       :   IN    std_logic;
          bus_last                        :   IN    std_logic;
          data                            :   OUT   std_logic_vector(31 DOWNTO 0);  -- uint32
          valid                           :   OUT   std_logic;
          last                            :   OUT   std_logic
          );
  END COMPONENT;

  -- Component Configuration Statements
  FOR ALL : QPSK_src_From_Stream_Bus
    USE ENTITY work.QPSK_src_From_Stream_Bus(rtl);

  FOR ALL : QPSK_src_From_Stream_Bus1
    USE ENTITY work.QPSK_src_From_Stream_Bus1(rtl);

  -- Signals
  SIGNAL data                             : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL From_Stream_Bus_valid            : std_logic;
  SIGNAL From_Stream_Bus_last             : std_logic;
  SIGNAL From_Stream_Bus1_data            : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL From_Stream_Bus1_valid           : std_logic;
  SIGNAL From_Stream_Bus1_last            : std_logic;
  SIGNAL From_Stream_Bus1_data_unsigned   : unsigned(31 DOWNTO 0);  -- uint32
  SIGNAL data_unsigned                    : unsigned(31 DOWNTO 0);  -- uint32
  SIGNAL Switch_out1                      : unsigned(31 DOWNTO 0);  -- uint32
  SIGNAL OR_out1                          : std_logic;
  SIGNAL Switch1_out1                     : std_logic;

BEGIN
  u_From_Stream_Bus : QPSK_src_From_Stream_Bus
    PORT MAP( bus_data => stream0_data,  -- uint32
              bus_valid => stream0_valid,
              bus_last => stream0_last,
              data => data,  -- uint32
              valid => From_Stream_Bus_valid,
              last => From_Stream_Bus_last
              );

  u_From_Stream_Bus1 : QPSK_src_From_Stream_Bus1
    PORT MAP( bus_data => stream1_data,  -- uint32
              bus_valid => stream1_valid,
              bus_last => stream1_last,
              data => From_Stream_Bus1_data,  -- uint32
              valid => From_Stream_Bus1_valid,
              last => From_Stream_Bus1_last
              );

  From_Stream_Bus1_data_unsigned <= unsigned(From_Stream_Bus1_data);

  data_unsigned <= unsigned(data);

  
  Switch_out1 <= From_Stream_Bus1_data_unsigned WHEN From_Stream_Bus_valid = '0' ELSE
      data_unsigned;

  streamOutData <= std_logic_vector(Switch_out1);

  OR_out1 <= From_Stream_Bus_valid OR From_Stream_Bus1_valid;

  
  Switch1_out1 <= From_Stream_Bus1_last WHEN From_Stream_Bus_valid = '0' ELSE
      From_Stream_Bus_last;

  streamOutValid <= OR_out1;

  streamOutLast <= Switch1_out1;

  stream0Ready <= streamOutReady;

  stream1Ready <= streamOutReady;

  last <= Switch1_out1;

END rtl;

